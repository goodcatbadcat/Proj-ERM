##################
# Finnish Events #
##################

add_namespace = ERM_finland

## Introduction Event ##
country_event = {
	id = ERM_finland.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event ERM_finland.0 FROM = [From.GetName]" }
	title = ERM_finland.0.t
	desc = ERM_finland.0.d
	picture = GFX_report_event_

	is_triggered_only = yes

	option = {
		name = ERM_finland.0.a
	}
}

# Ryti-Ribbentrop Agreement
country_event = {
	id = ERM_finland.1
	title = ERM_finland.1.t
	desc = ERM_finland.1.d
	picture = GFX_report_event_ribbentrop_ryti

	fire_only_once = yes

	trigger = {	
		date > 1944.6.25
		tag = GER
	}

	mean_time_to_happen = { days = 1 }
	
	# Offer Deal
	option = {
		name = ERM_finland.1.a
		ai_chance = { factor = 100 }
		add_political_power = -25
		FIN = { country_event = { id = ERM_finland.2 hours = 12 } }
		add_equipment_to_stockpile = {
			type = infantry_equipment_3
			amount = -2500
			producer = GER
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment_3
			amount = -2500
			producer = GER
		}
	}
	# Don't offer deal
	option = {
		name = ERM_finland.1.b
		ai_chance = { factor = 0 }
	}
}

# FIN: Ryti-Ribbentrop Agreement Reaction
country_event = {
	id = ERM_finland.2
	title = ERM_finland.2.t
	desc = ERM_finland.2.d
	picture = GFX_report_event_ribbentrop_ryti

	fire_only_once = yes

	is_triggered_only = yes

	mean_time_to_happen = { days = 1 }
	
	# Accept
	option = {
		name = ERM_finland.2.a
		ai_chance = { factor = 100 }
		add_ideas = { FIN_ryti_ribbentrop }
		add_equipment_to_stockpile = {
			type = infantry_equipment_3
			amount = 5000
			producer = GER
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment_3
			amount = 5000
			producer = GER
		}
		hidden_effect = {
			news_event = { id = world_news.6 }
		}
	}
	# Decline
	option = {
		name = ERM_finland.2.b
		ai_chance = { factor = 0 }
		add_stability = -0.05
		add_war_support = -0.10
	}
	# Seek peace terms with Moscow
	option = {
		name = ERM_finland.2.c
		ai_chance = { factor = 0 }
		SOV = { country_event = { id = ERM_finland.3 hours = 6 } }
	}
}

# SOV: Finland seeks peace
country_event = {
	id = ERM_finland.3
	title = ERM_finland.3.t
	desc = ERM_finland.3.d
	picture = GFX_report_event_

	fire_only_once = yes

	is_triggered_only = yes

	mean_time_to_happen = { days = 1 }
	
	# Accept
	option = {
		name = ERM_finland.3.a
		ai_chance = { factor = 100 }
		FIN = { country_event = { id = ERM_finland.301 hours = 6 } }
		SOV = {
			white_peace = FIN
		}
		FIN = {
			white_peace = SOV
		}
	}
	# Decline
	option = {
		name = ERM_finland.3.b
		ai_chance = { factor = 0 }
		FIN = { country_event = { id = ERM_finland.302 hours = 6 } }
	}
}

# FIN: Soviets agree to Armistice
country_event = {
	id = ERM_finland.301
	title = ERM_finland.301.t
	desc = ERM_finland.301.d
	picture = GFX_report_event_

	fire_only_once = yes

	is_triggered_only = yes

	mean_time_to_happen = { days = 1 }
	
	# Accept
	option = {
		name = ERM_finland.301.a
		ai_chance = { factor = 100 }
		SOV = {
			transfer_state = 147
			transfer_state = 722
			transfer_state = 146
		}
		hidden_effect = {
			news_event = { id = world_news.7 }
			set_global_flag = FIN_SOV_moscow_armistice
			GER = {
				transfer_state = 148
			}
		}
	}
}

# FIN: Soviets disagree to Armistice
country_event = {
	id = ERM_finland.302
	title = ERM_finland.302.t
	desc = ERM_finland.302.d
	picture = GFX_report_event_

	fire_only_once = yes

	is_triggered_only = yes

	mean_time_to_happen = { days = 1 }
	
	# Finland will not fall easy!
	option = {
		name = ERM_finland.302.a
		ai_chance = { factor = 100 }
		add_war_support = 0.35
		add_stability = -0.10
		add_political_power = 150
		add_ideas = { FIN_endsieg }
		hidden_effect = {
			news_event = { id = world_news.8 }
		}
	}
}

# Risto Ryti Resigns!
country_event = {
	id = ERM_finland.4
	title = ERM_finland.4.t
	desc = ERM_finland.4.d
	picture = GFX_report_event_

	fire_only_once = yes

	trigger = {
		tag = FIN
		FIN = {
			has_war_with = SOV
			surrender_progress > 0.10
		}
		NOT = {
			has_capitulated = yes
			OR = {
				has_global_flag = FIN_risto_ryti_resigns
			}
		}
	}
	
	mean_time_to_happen = { days = 1 }
	
	# Accept
	option = {
		name = ERM_finland.4.a
		ai_chance = { factor = 100 }
		set_politics = {
			ruling_party = social_conservative
			last_election = "1944.1.1"
			election_frequency = 72
			elections_allowed = yes
		}
		retire_country_leader = yes 
		create_country_leader = {
			name = "Carl Gustaf Emil Mannerheim"
			desc = "POLITICS_RISTO_HEIKKI_RYT_DESC"
			picture = "Portrait_Finland_CGE_Mannerheim.dds"
			expire = "1965.1.1"
			ideology = moderatism
			traits = {
				#
			}
		}
		hidden_effect = {
			set_global_flag = FIN_risto_ryti_resigns
			news_event = { id = world_news.9 }
		}
	}
	# Don't resign, we will fight on!
	option = {
		name = ERM_finland.4.b
		ai_chance = { factor = 0 }
		add_political_power = -100
		add_stability = -0.35
		add_war_support = -0.35
	}
}

# Mannerheim: Seek Peace With Soviets?
country_event = {
	id = ERM_finland.5
	title = ERM_finland.5.t
	desc = ERM_finland.5.d
	picture = GFX_report_event_

	fire_only_once = yes

	trigger = {
		tag = FIN
		has_global_flag = FIN_risto_ryti_resigns
		AND = {
			OR = {
				surrender_progress > 0.25
				date > 1944.8.15
			}
		}
	}
	
	mean_time_to_happen = { days = 1 }
	
	# Seek Peace
	option = {
		name = ERM_finland.5.a
		ai_chance = { factor = 100 }
		SOV = { country_event = { id = ERM_finland.3 hours = 12 } }
	}
	# We will fight on!
	option = {
		name = ERM_finland.5.b
		ai_chance = { factor = 0 }
		add_political_power = -50
		add_stability = -0.35
		add_war_support = -0.35
	}
}

# Lappland War
country_event = {
	id = ERM_finland.6
	title = ERM_finland.6.t
	desc = ERM_finland.6.d
	picture = GFX_report_event_

	fire_only_once = yes

	trigger = {
		has_global_flag = FIN_SOV_moscow_armistice
		GER = {
			has_war_with = SOV
			owns_state = 148
			OR = {
				controls_state = 148
			}
		}
		AND = {
			has_global_flag = GER_lappland_evacuation_slow 
			FIN = { has_war = no }
			GER = { has_war = yes }
		}
		NOT = { 
			has_global_flag = GER_FIN_lappland_war_over 
			has_global_flag = GER_lappland_evacuation_quick
		}
	}
	
	mean_time_to_happen = { days = 15 }
	
	# Declare War
	option = {
		name = ERM_finland.6.a
		ai_chance = { factor = 100 }
		add_war_support = 0.15
		FIN = {
			declare_war_on = {
				target = GER
				type = take_core_state
				generator = { 148 }
			}
		}
		hidden_effect = {
			set_global_flag = GER_FIN_lappland_war
			news_event = { id = world_news.12 }
		}
	}
	# Let them evacuate peacefully
	option = {
		name = ERM_finland.6.b
		ai_chance = { factor = 0 }
		add_political_power = -50
		add_stability = -0.15
	}
}

